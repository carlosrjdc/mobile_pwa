(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{7023:function(e,t,n){Promise.resolve().then(n.bind(n,2282))},8487:function(e){"use strict";let t="[a-fA-F\\d:]",n=e=>e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):"",r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",o="\n(?:\n(?:".concat(a,":){7}(?:").concat(a,"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:").concat(a,":){6}(?:").concat(r,"|:").concat(a,"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:").concat(a,":){5}(?::").concat(r,"|(?::").concat(a,"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:").concat(a,":){4}(?:(?::").concat(a,"){0,1}:").concat(r,"|(?::").concat(a,"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:").concat(a,":){3}(?:(?::").concat(a,"){0,2}:").concat(r,"|(?::").concat(a,"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:").concat(a,":){2}(?:(?::").concat(a,"){0,3}:").concat(r,"|(?::").concat(a,"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:").concat(a,":){1}(?:(?::").concat(a,"){0,4}:").concat(r,"|(?::").concat(a,"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::").concat(a,"){0,5}:").concat(r,"|(?::").concat(a,"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),c=new RegExp("(?:^".concat(r,"$)|(?:^").concat(o,"$)")),s=new RegExp("^".concat(r,"$")),i=new RegExp("^".concat(o,"$")),d=e=>e&&e.exact?c:RegExp("(?:".concat(n(e)).concat(r).concat(n(e),")|(?:").concat(n(e)).concat(o).concat(n(e),")"),"g");d.v4=e=>e&&e.exact?s:RegExp("".concat(n(e)).concat(r).concat(n(e)),"g"),d.v6=e=>e&&e.exact?i:RegExp("".concat(n(e)).concat(o).concat(n(e)),"g"),e.exports=d},3941:function(e,t,n){"use strict";let r=n(8487),a=e=>r({exact:!0}).test(e);a.v4=e=>r.v4({exact:!0}).test(e),a.v6=e=>r.v6({exact:!0}).test(e),a.version=e=>a(e)?a.v4(e)?4:6:void 0,e.exports=a},575:function(e,t,n){"use strict";n.d(t,{z:function(){return d}});var r=n(3827),a=n(4090),o=n(9143),c=n(7742),s=n(2169);let i=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:n,variant:a,size:c,asChild:d=!1,...u}=e,l=d?o.g7:"button";return(0,r.jsx)(l,{className:(0,s.cn)(i({variant:a,size:c,className:n})),ref:t,...u})});d.displayName="Button"},3929:function(e,t,n){"use strict";n.d(t,{OX:function(){return p},Qz:function(){return i},dy:function(){return s},iI:function(){return m},sc:function(){return f},u6:function(){return h},uh:function(){return u},ze:function(){return x}});var r=n(3827),a=n(4090),o=n(9484),c=n(2169);let s=e=>{let{shouldScaleBackground:t=!0,...n}=e;return(0,r.jsx)(o.d.Root,{shouldScaleBackground:t,...n})};s.displayName="Drawer";let i=o.d.Trigger,d=o.d.Portal,u=o.d.Close,l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(o.d.Overlay,{ref:t,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80",n),...a})});l.displayName=o.d.Overlay.displayName;let f=a.forwardRef((e,t)=>{let{className:n,children:a,...s}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(l,{}),(0,r.jsxs)(o.d.Content,{ref:t,className:(0,c.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",n),...s,children:[(0,r.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),a]})]})});f.displayName="DrawerContent";let p=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,c.cn)("grid gap-1.5 p-4 text-center sm:text-left",t),...n})};p.displayName="DrawerHeader";let x=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,c.cn)("mt-auto flex flex-col gap-2 p-4",t),...n})};x.displayName="DrawerFooter";let m=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(o.d.Title,{ref:t,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",n),...a})});m.displayName=o.d.Title.displayName;let h=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(o.d.Description,{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",n),...a})});h.displayName=o.d.Description.displayName},2782:function(e,t,n){"use strict";n.d(t,{I:function(){return c}});var r=n(3827),a=n(4090),o=n(2169);let c=a.forwardRef((e,t)=>{let{texto:n,className:a,type:c,...s}=e;return(0,r.jsxs)("div",{className:"flex focus-visible:p-2 focus:p-2 items-center gap-2 h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",children:[(0,r.jsx)("div",{className:"font-bold",children:n}),(0,r.jsx)("input",{type:c,className:(0,o.cn)("selection:animate-none outline-none w-full h-8 file:bg-lime-200",a),ref:t,...s})]})});c.displayName="Input"},7068:function(e,t,n){"use strict";let r=n(7908).Z.create({baseURL:"http://localhost:4000/",timeout:1e3,headers:{"X-Custom-Header":"foobar",Accept:"application/json"}});t.Z=r},2169:function(e,t,n){"use strict";n.d(t,{cn:function(){return o}});var r=n(3167),a=n(1367);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}},2282:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(3827),a=n(575),o=n(2782),c=n(7068),s=n(6688),i=n(3941);class d extends Error{get isCanceled(){return!0}constructor(){super("Request was cancelled"),this.name="CancelError"}}class u extends Error{constructor(e){super("Could not get the public IP address",e),this.name="IpNotFoundError"}}let l={timeout:5e3},f={v4:["https://ipv4.icanhazip.com/","https://api.ipify.org/"],v6:["https://ipv6.icanhazip.com/","https://api6.ipify.org/"]},p=(e,t,n)=>{let r;let a=new XMLHttpRequest,o=new Promise((o,c)=>{r=c,a.addEventListener("error",c,{once:!0}),a.addEventListener("timeout",c,{once:!0}),a.addEventListener("load",()=>{let e=a.responseText.trim();if(!e||!i[n](e)){c();return}o(e)},{once:!0}),a.open("GET",e),a.timeout=t.timeout,a.send()});return o.cancel=()=>{a.abort(),r(new d)},o},x=(e,t)=>{let n;let r=async function(){var r;let a;for(let o of[...f[e],...null!==(r=t.fallbackUrls)&&void 0!==r?r:[]])try{return n=p(o,t,e),await n}catch(e){if(a=e,e instanceof d)throw e}throw new u({cause:a})}();return r.cancel=()=>{n.cancel()},r},m={};async function h(e){var t;if(e={timeout:5e3,ipVersion:4,...e},!(null===(t=navigator)||void 0===t?void 0:t.onLine))return!1;let n=4===e.ipVersion?"v4":"v6";try{return await m[n](e),!0}catch(e){return!1}}async function v(e,t){return await h()?function(e,t){c.Z.post("/lote",t).then(()=>console.log("")).catch(n=>{g(e,t)})}(e,t):g(e,t)}async function g(e,t){let n=await (0,s.U2)(e);if(!n)return await (0,s.Vx)(e,e=>[t]);{let r=[...n,t];return await (0,s.Vx)(e,e=>r)}}m.v4=e=>x("v4",{...l,...e}),m.v6=e=>x("v6",{...l,...e});let b=(0,n(2020).Ue)(e=>({produtos:[],ADD_PRODUTO(t){e(e=>({produtos:[...e.produtos,t]}))},REMOVE_PRODUTO(t){e(e=>({produtos:e.produtos.filter(e=>e.id!==t)}))},UPDATE_PRODUTO(t){e(e=>({produtos:e.produtos.map(e=>e.id===t.id?{...e,sku:t.sku,lote:t.lote,quantidade:t.quantidade,unidade:t.unidade}:e)}))}}));var j=n(1270),y=n(4090),w=n(2670),N=n(1231),R=n(248),E=n(4359);function k(e){let{funcao:t}=e,[n,a]=(0,y.useState)(null);return(0,y.useEffect)(()=>{let e=new E.t2("reader");e.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},function(n){e.stop(),t("endereco",n)},function(e){console.warn(e)})},[]),n?(0,r.jsxs)("div",{children:["Sucess: ",n]}):(0,r.jsx)("div",{id:"reader"})}var z=n(3929),O=n(6509);function A(e){let{funcao:t}=e,[n,o]=y.useState(350);return(0,r.jsxs)(z.dy,{children:[(0,r.jsx)(z.Qz,{asChild:!0,children:(0,r.jsx)(O.Z,{size:50,className:" p-2"})}),(0,r.jsx)(z.sc,{children:(0,r.jsxs)("div",{className:"mx-auto w-full max-w-sm",children:[(0,r.jsxs)(z.OX,{children:[(0,r.jsx)(z.iI,{children:"Foto Etiqueta"}),(0,r.jsx)(z.u6,{children:"Tirar uma foto da etiqueta."})]}),(0,r.jsx)(k,{funcao:t}),(0,r.jsxs)(z.ze,{children:[(0,r.jsx)(z.uh,{asChild:!0,children:(0,r.jsx)(a.z,{children:"Submit"})}),(0,r.jsx)(z.uh,{asChild:!0,children:(0,r.jsx)(a.z,{variant:"outline",children:"Cancel"})})]})]})})]})}let C=R.Ry({produto:R.Z_(),lote:R.Z_(),caixas:R.Rx(),unidade:R.Rx(),endereco:R.Z_()});function D(){let[e,t]=(0,y.useState)(""),[n,c]=(0,y.useState)(!1),[i,d]=(0,y.useState)("lactalis"),{register:u,handleSubmit:l,setValue:f,getValues:p,formState:{errors:x}}=(0,w.cI)({resolver:(0,j.F)(C)}),m=b(e=>e.ADD_PRODUTO);async function g(){v("atualizar",{caixas:p().caixas,demandaId:1,descricao:e,posicao:"A 001 0001 10",unidade:p().unidade,sku:p().produto,id:(0,N.Z)()})}async function R(e){console.log(await h());let n=await (0,s.U2)("produtos");if(n){let r=JSON.parse(n).filter(t=>t.sku===parseInt(e.target.value)||t.dum===e.target.value||t.ean===e.target.value);r.length>0?(t(r[0].desc),d(r[0].empresa),"PVAR"===r[0].tipo?c(!1):c(!0)):t("")}}return b(e=>e.produtos),(0,r.jsxs)("form",{className:"flex flex-col gap-4 w-full p-2",onSubmit:l(t=>{m({id:(0,N.Z)(),lote:t.lote,quantidade:t.caixas,sku:t.produto,unidade:t.unidade,endereco:t.endereco,fabricacao:"",sif:0,descricao:e}),console.log(t)}),children:[(0,r.jsx)(o.I,{texto:"Endere\xe7o",...u("endereco",{onBlur(e){R(e)}})}),(0,r.jsx)(o.I,{texto:"SKU",...u("produto",{onBlur(e){R(e)}})}),e&&(0,r.jsx)("strong",{children:e}),(0,r.jsx)(o.I,{texto:"Lote",...u("lote")}),(0,r.jsx)(o.I,{texto:"Caixas",...u("caixas",{valueAsNumber:!0})}),(0,r.jsx)(o.I,{texto:"Unidades",...u("unidade",{valueAsNumber:!0})}),(0,r.jsx)(A,{funcao:()=>f}),(0,r.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,r.jsx)(a.z,{onClick:()=>g(),type:"button",children:"VOLTAR"}),(0,r.jsx)(a.z,{className:"",type:"submit",children:"CADASTRAR"})]})]})}}},function(e){e.O(0,[52,363,841,453,971,362,744],function(){return e(e.s=7023)}),_N_E=e.O()}]);